<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <title>Instruction Network – Tom Hohenstein – A place for my experiments</title>

    <meta name="author" content="Tom Hohenstein" />
    <meta name="description" content="A place for my experiments">

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- add bootstrap --> 
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">
   </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <div id="brand-holder">
            <a class="navbar-brand" href="">Logo</a>
          </div>
          <ul>
            <li><a class="custom-navbar-link" href="/about/">About</a></li>
            <li><a class="custom-navbar-link" href="/opinion/">Opinion</a></li>
            <li><a class="custom-navbar-link" href="/projects/">Projects</a></li>
          </ul>
        </div>
      </div><!-- /.container-fluid -->
    </nav>
    <div id="body-wrapper">
    <article class="post col-sm-8 col-sm-offset-2">
  <h1>Instruction Network</h1>

  <div class="entry">
    <style>
.link {
    stroke: rgb(25, 25, 25);
    stroke-width: 0.5px;
}
.node {
    fill: #ccc;
    stroke: #fff;
    stroke-width: 5px;
}
</style>

<p>This project attempts to represent instructional statistics as a network graph. All personal data has been removed and replaced with numbers. </p>

<p>The smaller “redish” circles represent faculty members while the larger “blueish” circles represent librarians. Each line represents an instructional session. </p>

<p>While this project is far from finished, feel free to click around and drag the circles. </p>

<div id="svg"></div>

<h2 id="how-this-works">How this works</h2>

<p>Before starting, I need to thank a <a href="http://bl.ocks.org/sathomas/11550728">series of posts</a> by <a href="http://bl.ocks.org/sathomas">sathomas</a> on blocks. I was completely lost before I found his posts. </p>

<h3 id="tools">Tools</h3>
<p>Here are the tools that I used for this project: </p>

<ul>
  <li><a href="https://github.com/mbostock/d3">d3 javascript</a> library, which can be found <a href="https://github.com/mbostock/d3">on GitHub</a>. </li>
  <li><a href="http://openrefine.org/">OpenRefine</a></li>
  <li><a href="http://www.sublimetext.com/">SublimeText</a> </li>
  <li><a href="http://www.convertcsv.com/csv-to-json.htm">Convert CSV to JSON</a></li>
  <li>Excel</li>
</ul>

<p>I would also like to think the <a href="http://altbibl.io/dst4l/">DST4L</a> classes that Chris Erdmann has organized. </p>

<h3 id="basic-process">Basic Process</h3>

<p>Like many libraries we keep rather detailed instruction statistics. However, outside of doing some basic counting with them - number of sessions and number of student contacts - we don’t do much with them. </p>

<script src="/projects/in/d3/d3.min.js"></script>

<script>
//canvas size 
var width = 800,
    height = 500,
    data;

//add svg to dom 
var svg = d3.select("#svg").append("svg")
    .attr("width", width)
    .attr("height", height);

//load node json file
d3.json("node.json", function(error, nodes){
	if(error) return console.warn(error);
	//load edge json file
	d3.json("edge.json", function(error, links){
		if(error) return console.warn(error);

		//links are the json file 
		var force = d3.layout.force()
	        .size([width, height]) //size
	        .gravity(0.8) //gravity
	        .charge(-500) //charge between elements
	        .linkStrength(0.4) // link strength, rigidity 
	        .nodes(nodes) // adds nodes
	        .links(links); // adds links 
	    //set the link distance 
	    force.linkDistance(20);
	    //enable dragging of nodes
	    var drag = force.drag()
    		.on("dragstart", dragstart);
	    //draw links first
	    var link = svg.selectAll('.link')
			.data(links)
			.enter().append('line')
			.attr('class', 'link');
		//draw nodes - issue with x, y 
		var node = svg.selectAll('.node')
			.data(nodes)
			.enter().append('circle')
			.attr('class','node')
			.style('fill',function(d) {return d.color})
			.style('stroke',function(d) {return d.color})
			.attr('r',function(d) {return d.size})
			.attr('id', function(d) {return d.label})
			.on("click", click)
			.on("dblclick", dblclick)
			.call(drag);
		//turn force on and sent function for each tick
		force.on('tick', function(){
			//update node location
		  	node.attr('cx', function(d) { return d.x; })
		       .attr('cy', function(d) { return d.y; })
		    //update link location
		    link.attr('x1', function(d) { return d.source.x; })
		        .attr('y1', function(d) { return d.source.y; })
		        .attr('x2', function(d) { return d.target.x; })
		        .attr('y2', function(d) { return d.target.y; });

		});
		force.start(); 
	});
	
});
//force functions 
function click(d) {
	console.log(d);  
	d3.select(this).append("text")
		.attr("x", 12)
		.attr("dy", ".4em")
		.text(d.label); 
	d3.select(this).append("text")
}
function dblclick(d) {
  d3.select(this).classed("fixed", d.fixed = false);
}
function dragstart(d) {
  d3.select(this).classed("fixed", d.fixed = true);
}
</script>


  </div>
  
  
</article>
    </div>
    <footer>
      
    </footer>

    <script src="/assets/js/jquery-1.11.1.js"></script>
    <script src="/assets/js/bootstrap.js"></script>
  </body>
</html>