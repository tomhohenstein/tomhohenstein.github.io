<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <title>Row Chart 1 – Tom Hohenstein – A place for my experiments</title>

    <meta name="author" content="Tom Hohenstein" />
    <meta name="description" content="A place for my experiments">

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
     <!-- add favicon --> 
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico">
    <!-- add bootstrap --> 
    <link href="/assets/css/l/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">
    
   </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <div id="brand-holder">
            <a class="navbar-brand" href="http://tomhohenstein.com" id="logo" title="Tom Hohenstein logo" ><sup>T</sup><sub>H</sub></a>
          </div>
          <a class="about-link" href="/about/" title="About Tom Hohenstein">About</a>
         </div>
      </div><!-- /.container-fluid -->
    </nav>
    <div class="body-wrapper" id="Row Chart 1">
    <article>
	<h1>Row Chart 1</h1>
	<div class="entry">
		<style>
.axis text {
  font: 10px sans-serif;
}
.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}
#chart rect {
  fill: rgb(210, 122, 122);
}
#chart text {
  fill: black;
  font: 14px sans-serif;
}
#chart text .major {
  text-anchor: end;
}
.entry {
  max-width: 700px; 
  margin: 0 auto; 
}

</style>

<div class="dropdown">
  <button class="btn btn-default btn-lg dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
    Sort Options
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
    <li role="presentation"><a data-val="1" role="menuitem" tabindex="-1" href="#">A-Z</a></li>
    <li role="presentation"><a data-val="2" role="menuitem" tabindex="-1" href="#">Z-A</a></li>
    <li role="presentation"><a data-val="3" role="menuitem" tabindex="-1" href="#">Highest to Lowest</a></li>
    <li role="presentation"><a data-val="4" role="menuitem" tabindex="-1" href="#">Lowest to Highest</a></li>
  </ul>
</div>
<h3 id="sorted">Sorted: A-Z</h3>
<svg id="chart"></svg>

<p>Creating my first <a href="http://d3js.org/">D3</a> row chart was both a lot of fun and a bit more work than I anticipated. However, I think the results are worth the effort. </p>

<h2 id="resources">Resources</h2>

<p>To accomplish this task I used for the following resources: </p>

<ul>
  <li>Mike Bostock’s series of posts titled <em><a href="http://bost.ocks.org/mike/bar/">Let’s Make a Bar Chart</a></em> and his <em><a href="http://bl.ocks.org/mbostock/3885705">Sortable Bar Chart</a></em></li>
  <li>The <a href="https://github.com/mbostock/d3/wiki/API-Reference">D3 API reference</a></li>
  <li><a href="http://api.jquery.com/">jQuery’s API</a></li>
  <li>Scott Murray’s <em><a href="http://alignedleft.com/tutorials/d3/making-a-bar-chart">Making a Bar Chart</a></em></li>
</ul>

<h2 id="process">Process</h2>

<p>The process seems easy enough, tell D3 to load some data and then build the row chart. However, between adding the x and y axes, making the row chart sortable, and incorporating transitions, the process can be a bit complicated. You can find the <a href="https://github.com/tomhohenstein/tomhohenstein.github.io/blob/master/assets/js/p/barchart.js">full JavaScript source on my GitHub account</a>, but I highly recommend reading <a href="http://bost.ocks.org/mike/bar/">Mike Bostock’s posts</a>.  Below is some pseudocode of the process to get you started.  </p>

<pre><code class="language-javascript">//load data
d3.json("data file", function(err, data){

 //I sorted my data right away using 
 data.sort(function(a, b){ return d3.ascending()})

 //set vars 
 var margin, barHeight, width, height 
  //note: setting the margins is critical

 //set x axis linear scale
 var x = d3.scale.linear().domain().range();

 //use an ordinal scale for the y axis 
 var y = d3.scale.ordinal().domain().rangeBands();      

 //x axis var 
 var xAxis = d3.svg.axis().scale(x).orient();
  //note: use x var for the scale 

 //y axis var
 var yAxis  = d3.svg.axis().scale(y).orient(); 
  //note: use y var for the scale 

 //add chart
 var chart = d3.select()
 .attr("width",)
 .attr("height",); 
  //note: watch your margins

 //add bars
 var bar = chart.selectAll(".bar")
 .data()
 .enter().append("g")
 .attr("transform",) 
 .attr("class",)
 .attr("y",);
  //note: use transform to position the bars 

 //adds rectangle for the bar
 bar.append("rect")
 .attr("width",)
 .attr("height",);

 //adds text for each bar
 bar.append("text")
 .attr("x",)
 .attr("y",)
 .attr("dy",)
 .text();
  //note: use x and y to position the text. 

 //add x axis 
 chart.append("g")
 .attr("class",)
 .attr("transform",)
 .call(xAxis);
  //note: use transform to set x axis location 

 //add y axis 
 chart.append("g")
 .attr("class",)
 .attr("transform",)
 .call(yAxis);
  //note: use transform to set y axis location

 //a function for updating chart 
 function update(){ 
  //sort the data 

  //remap y domain 
  y.domain(data.map())

  //transitions vars
  var transition = chart.transition().duration(),
  delay = function(d, i) { return };

  //transition bars 
  transition.selectAll(".bar")
  .delay(delay)
  .attr("transform",);

  //transition y axis 
  transition.select()
  .call(yAxis)
  .selectAll("g")
  .delay(delay);        
}

//update based on user event 
//note: I used jQuery for event detection 
</code></pre>

	</div>
</article>
    </div>
    <footer class="row">
      <div>
        <p>Find me on</p>
        <a href="https://www.linkedin.com/in/hohenstein/"><img alt="LinkedIn Icon" class="footer-icon" src="/assets/img/footer-icons/LinkedIn-InBug-2CRev.png"></a> 
        <a href="https://github.com/tomhohenstein"><img alt="GitHub Icon" class="footer-icon" height=50 src="/assets/img/footer-icons/GitHub-Mark-120px-plus.png" width=50></a>
        <a href="https://twitter.com/TomHohenstein"><img alt="Twitter Icon" class="footer-icon"  src="/assets/img/footer-icons/Twitter_logo_blue.png" ></a>
      </div> 
      <div id="issues">
        <p>Something amiss?</p>
        <a class="btn btn-default btn-lg" href="https://github.com/tomhohenstein/tomhohenstein.github.io/issues" id="error" role="button" title="Report an Issue">Report it</a>
      </div>
    </footer>

    <script src="/assets/js/l/jquery-1.11.1.js"></script>
    <script src="/assets/js/l/bootstrap.min.js"></script>
    <script src="/assets/js/l/jquery.mobile.custom.touch.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51252936-1', 'auto');
      ga('send', 'pageview');
    </script>
    
      <script src="/assets/js/l/d3.min.js"></script>
    
      <script src="/assets/js/p/barchart.js"></script>
    
  </body>
</html>